(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[757],{3150:(e,t,r)=>{Promise.resolve().then(r.bind(r,4908))},4908:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var a=r(5155),n=r(8148),s=r(2115),c=r(9582),l=r(5576),i=r(4964),o=r(7866);function u(){let[e,t]=(0,s.useState)((0,c._)()),[r,u]=(0,s.useState)(""),[d,f]=(0,s.useState)(""),[m,h]=(0,s.useState)(""),[x,p]=(0,s.useState)(!1),[g,v]=(0,s.useState)(!1),[b,j]=(0,s.useState)("");return(0,a.jsxs)("div",{children:[(0,a.jsx)(o.A,{show:g,text:b,setShowDefault:v}),(0,a.jsx)("div",{className:"mt-3 text-center",children:(0,a.jsx)("h1",{children:"Витрата"})}),(0,a.jsx)("div",{className:"d-block",children:(0,a.jsx)(n.A,{href:"/",color:"secondary",text:"На головну"})}),(0,a.jsx)("div",{className:"d-flex justify-content-center mt-3",children:(0,a.jsx)("input",{type:"date",className:"i-default form-control",value:e.from,onChange:r=>t({...e,from:r.target.value})})}),(0,a.jsx)("div",{className:"d-flex justify-content-center mt-3",children:(0,a.jsxs)("select",{className:"form-control s-default",value:r,onChange:e=>u(e.target.value),children:[(0,a.jsx)("option",{value:"",children:"Обрати"},""),Object.entries(l.L).map(e=>{let[t,r]=e;return(0,a.jsx)("option",{value:t,children:r},t)})]})}),(0,a.jsx)("div",{className:"d-flex justify-content-center mt-3",children:(0,a.jsx)("input",{type:"number",className:"i-default form-control",min:"0",value:d,onChange:e=>f(e.target.value)})}),(0,a.jsx)("div",{className:"d-flex justify-content-center mt-3",children:(0,a.jsx)("textarea",{className:"form-control t-default",onChange:e=>h(e.target.value),value:m})}),(0,a.jsx)("div",{className:"d-flex justify-content-center mt-3",children:(0,a.jsx)("button",{type:"button",className:"btn btn-success b-default",onClick:function(){p(!0),Number(d)>0&&r.length>0?(0,i.Ou)(e.from,d,"expense",r,m).then(e=>{v(!0),e?(f(""),h(""),j("Данні додано успішно")):j("Не вдалось додати дані"),p(!1)}):(v(!0),j("Поле категорія та сумма не можуть бути порожніми"),p(!1))},disabled:x,children:"Додати"})})]})}},4964:(e,t,r)=>{"use strict";r.d(t,{Ou:()=>u,T5:()=>l,e4:()=>i,h5:()=>o,r1:()=>f,uo:()=>d});var a=r(2378),n=r(5576),s=r(63);function c(){let e=a.A.get("supabase-auth-token");return e||null}async function l(){try{let t,r=c();try{(t=JSON.parse(r)).access_token&&t.refresh_token||(0,s.redirect)("/")}catch(e){(0,s.redirect)("/")}let{data:{session:l},error:i}=await n.DB.auth.setSession({access_token:t.access_token,refresh_token:t.refresh_token});if(!i)return l;{var e;let{data:r,error:c}=await n.DB.auth.refreshSession({refresh_token:t.refresh_token});return c?(0,s.redirect)("/"):(e=l,a.A.set("supabase-auth-token",JSON.stringify(e),{expires:1,path:"/",secure:!0,sameSite:"Strict"})),r.session}}catch(e){console.error("Помилка перевірки автентифікації:",e.message,e.line),(0,s.redirect)("/")}}function i(){a.A.remove("supabase-auth-token",{path:"/"})}async function o(e,t){let r={data:null,error:""};try{if(!await l())return r.error="Користувач не авторизований",r;let{data:a,error:s}=await n.DB.from(n.B.main).select("*").gte("created_at",e).lte("created_at",t);if(s)return r.error="Помилка отримання даних із ".concat(n.B.main,": ")+s.message,r;r.data=a}catch(e){r.error="Виняток у getStatistic: "+e.message}return r}async function u(e,t,r,a,s){try{if(!await l())throw"Користувач не авторизований";let i=JSON.parse(c()),o={sum:t,type:r,user_id:i.user.id,created_at:new Date(e),category:a||null,comment:s||null},{error:u}=await n.DB.from(n.B.main).insert([o]);if(u)throw u;return!0}catch(e){return console.error("Помилка запиту:",e.message),!1}}async function d(e,t){try{if(!await l())throw"Користувач не авторизований";let r=JSON.parse(c()),a={uah:t,user_id:r.user.id,last_check:new Date},{error:s}=await n.DB.from(n.B.balance).update(a).eq("id",e);if(s)throw s;return!0}catch(e){return console.error("Помилка запиту:",e.message),!1}}async function f(){let e={data:null,error:""};try{if(!await l())return e.error="Користувач не авторизований",e;let t=JSON.parse(c()),{data:r,error:a}=await n.DB.from(n.B.balance).select("*").eq("user_id",t.user.id).single();if(a)return e.error="Помилка отримання даних із ".concat(n.B.balance,": ")+a.message,e;e.data=r}catch(t){e.error="Виняток у getBalance: "+t.message}return e}},5576:(e,t,r)=>{"use strict";r.d(t,{B:()=>n,DB:()=>a,L:()=>s});let a=(0,r(2659).UU)("https://vntunuzrneoakdckqjvk.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZudHVudXpybmVvYWtkY2txanZrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE3MTI5NzEsImV4cCI6MjA2NzI4ODk3MX0.CWJIVqq-x5_doDk8rsl8ZJWP7um9VakuIDBihcfsrsU"),n={main:"fin_statistic",balance:"fin_balance"},s={pr:"Продукти",cf:"Кафе",cm:"Кумунальні платежі",md:"Аптека",eva:"Eva/Makeup",zoo:"Зоотовари",cl:"Одяг",usd:"Валюта",ot:"Інше"}},7866:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(5155),n=r(2115);function s(e){let{show:t,text:r,setShowDefault:s}=e;return((0,n.useEffect)(()=>{if(t){let e=setTimeout(()=>{s(!1)},2e3);return()=>clearTimeout(e)}},[t]),t||0!==r.length)?(0,a.jsx)("div",{className:"c-modal ".concat(t?"fade-in":"fade-out"),id:"exampleModal",tabIndex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:(0,a.jsx)("div",{className:"modal-dialog text-center",children:(0,a.jsx)("div",{className:"alert alert-primary pt-3",role:"alert",children:r})})}):null}},8148:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var a=r(5155),n=r(2619),s=r.n(n);function c(e){let{href:t,text:r,color:n}=e;return(0,a.jsx)("div",{className:"text-center p-2",children:(0,a.jsx)(s(),{href:t,className:"btn btn-".concat(n," btn-menu fs-4 fw-bold"),children:r})})}},9582:(e,t,r)=>{"use strict";function a(){let e=new Date,t=new Date(e);return t.setDate(e.getDate()+1),{from:s(e),to:s(t)}}function n(){let e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1),r=new Date(e.getFullYear(),e.getMonth()+1,0);return{from:s(t),to:s(r)}}function s(e){let t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(r,"-").concat(a)}r.d(t,{E:()=>n,_:()=>a})}},e=>{e.O(0,[76,441,255,358],()=>e(e.s=3150)),_N_E=e.O()}]);