(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[340],{1398:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var n=r(5155),a=r(8148),s=r(2115),c=r(9582),i=r(4964);function o(e){let{show:t,text:r,type:a}=e,[c,i]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{"block"===t&&(i(!0),clearTimeout(setTimeout(()=>{i(!1)},2e3)))},[t]),(0,n.jsx)("div",{className:c?"c-modal":"d-none",id:"exampleModal",tabIndex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:(0,n.jsx)("div",{className:"modal-dialog text-center",children:(0,n.jsx)("div",{className:"alert alert-".concat(a," pt-3"),role:"alert",children:r})})})}function u(){let[e,t]=(0,s.useState)((0,c._)()),[r,u]=(0,s.useState)(""),[l,d]=(0,s.useState)(!1),[f,m]=(0,s.useState)("none"),[h,p]=(0,s.useState)(""),[v,b]=(0,s.useState)("success");return(0,n.jsxs)("div",{children:[(0,n.jsx)(o,{show:f,text:h,type:v}),(0,n.jsx)("div",{className:"mt-3 text-center",children:(0,n.jsx)("h1",{children:"Дохід"})}),(0,n.jsx)("div",{className:"d-block",children:(0,n.jsx)(a.A,{href:"/",color:"secondary",text:"На головну"})}),(0,n.jsx)("div",{className:"d-flex justify-content-center mt-3",children:(0,n.jsx)("input",{type:"date",className:"i-default form-control",value:e.from,onChange:r=>t({...e,from:r.target.value})})}),(0,n.jsx)("div",{className:"d-flex justify-content-center mt-3",children:(0,n.jsx)("input",{type:"number",className:"i-default form-control",value:r,onChange:e=>u(e.target.value),min:"0"})}),(0,n.jsx)("div",{className:"d-flex justify-content-center mt-3",children:(0,n.jsx)("button",{type:"button",className:"btn btn-success b-default",disabled:l,onClick:function(){d(!0),(0,i.Ou)(e.from,r,"income","","").then(e=>{m("block"),e?(u(""),p("Данні додано успішно"),b("success")):(p("Не вдалось додати дані"),b("danger")),d(!1)})},children:"Додати"})})]})}},2378:(e,t,r)=>{"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}r.d(t,{A:()=>a});var a=function e(t,r){function a(e,a,s){if("undefined"!=typeof document){"number"==typeof(s=n({},r,s)).expires&&(s.expires=new Date(Date.now()+864e5*s.expires)),s.expires&&(s.expires=s.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var c="";for(var i in s)s[i]&&(c+="; "+i,!0!==s[i]&&(c+="="+s[i].split(";")[0]));return document.cookie=e+"="+t.write(a,e)+c}}return Object.create({set:a,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],n={},a=0;a<r.length;a++){var s=r[a].split("="),c=s.slice(1).join("=");try{var i=decodeURIComponent(s[0]);if(n[i]=t.read(c,i),e===i)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){a(e,"",n({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,n({},this.attributes,t))},withConverter:function(t){return e(n({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})},4964:(e,t,r)=>{"use strict";r.d(t,{Ou:()=>u,T5:()=>c,e4:()=>i,h5:()=>o});var n=r(2378),a=r(5576);function s(){let e=n.A.get("supabase-auth-token");return e||null}async function c(){try{let t,r=s();try{if(!(t=JSON.parse(r)).access_token||!t.refresh_token)return!1}catch(e){return!1}let{data:{session:c},error:i}=await a.DB.auth.setSession({access_token:t.access_token,refresh_token:t.refresh_token});if(!i)return c;{var e;let{data:r,error:s}=await a.DB.auth.refreshSession({refresh_token:t.refresh_token});if(s)return!1;return e=c,n.A.set("supabase-auth-token",JSON.stringify(e),{expires:1,path:"/",secure:!0,sameSite:"Strict"}),r.session}}catch(e){return console.error("Помилка перевірки автентифікації:",e.message,e.line),!1}}function i(){n.A.remove("supabase-auth-token",{path:"/"})}async function o(e,t){let r={data:null,error:""};try{if(!await c())return r.error="Користувач не авторизований",r;let{data:n,error:s}=await a.DB.from(a.B.main).select("*").gte("created_at",e).lte("created_at",t);if(s)return r.error="Помилка отримання даних із ".concat(table,":"),s.message,r;r.data=n}catch(e){r.error="Виняток у fetchData: "+e.message}return r}async function u(e,t,r,n,i){try{if(!await c())throw"Користувач не авторизований";let o=JSON.parse(s()),u={sum:t,type:r,user_id:o.user.id,created_at:new Date(e),category:n||null,comment:i||null},{error:l}=await a.DB.from(a.B.main).insert([u]);if(l)throw l;return!0}catch(e){return console.error("Помилка запиту:",e.message),!1}}},5576:(e,t,r)=>{"use strict";r.d(t,{B:()=>a,DB:()=>n,L:()=>s});let n=(0,r(2659).UU)("https://vntunuzrneoakdckqjvk.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZudHVudXpybmVvYWtkY2txanZrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE3MTI5NzEsImV4cCI6MjA2NzI4ODk3MX0.CWJIVqq-x5_doDk8rsl8ZJWP7um9VakuIDBihcfsrsU"),a={main:"fin_statistic",balance:"fin_balance"},s={pr:"Продукти",cf:"Кафе",cm:"Кумунальні платежі",md:"Аптека",eva:"Eva/Makeup",zoo:"Зоотовари",cl:"Одяг",usd:"Валюта",ot:"Інше"}},6109:(e,t,r)=>{Promise.resolve().then(r.bind(r,1398))},8148:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var n=r(5155),a=r(2619),s=r.n(a);function c(e){let{href:t,text:r,color:a}=e;return(0,n.jsx)("div",{className:"text-center p-2",children:(0,n.jsx)(s(),{href:t,className:"btn btn-".concat(a," btn-menu fs-4 fw-bold"),children:r})})}},9582:(e,t,r)=>{"use strict";function n(){let e=new Date,t=new Date(e);t.setDate(e.getDate()+1);let r=e=>{let t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(r,"-").concat(n)};return{from:r(e),to:r(t)}}r.d(t,{_:()=>n})}},e=>{e.O(0,[619,40,441,255,358],()=>e(e.s=6109)),_N_E=e.O()}]);