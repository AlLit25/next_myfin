(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1136:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>E});var n=t(5155),l=t(2115),a=t(4964),r=t(5576),c=t(2378),i=t(2253);function d(){let[e,s]=(0,l.useState)(""),[t,a]=(0,l.useState)(""),[d,o]=(0,l.useState)(null),u=async s=>{s.preventDefault(),o(null);try{let{data:s,error:n}=await r.DB.auth.signInWithPassword({email:e,password:t});if(n)return void o(n.message);c.A.set("supabase-auth-token",JSON.stringify(s.session),{expires:1,path:"/",secure:!0,sameSite:"Strict"}),location.reload()}catch(e){o("Помилка авторизації: "+e.message)}};return(0,n.jsx)("div",{className:"d-block",children:(0,n.jsxs)("form",{onSubmit:u,children:[d&&(0,n.jsx)("div",{className:"alert alert-danger",children:d}),(0,n.jsx)("div",{className:"d-flex justify-content-center m-4",children:(0,n.jsxs)("div",{className:i.Fr?"w-100":"w-50",children:[(0,n.jsx)("label",{className:"form-label",children:"Email"}),(0,n.jsx)("input",{className:"form-control form-control-lg",type:"email",placeholder:"email@com.ua",value:e,onChange:e=>s(e.target.value),required:!0})]})}),(0,n.jsx)("div",{className:"d-flex justify-content-center m-4",children:(0,n.jsxs)("div",{className:i.Fr?"w-100":"w-50",children:[(0,n.jsx)("label",{className:"form-label",children:"Пароль"}),(0,n.jsx)("input",{className:"form-control form-control-lg",type:"password",placeholder:"",value:t,onChange:e=>a(e.target.value),required:!0})]})}),(0,n.jsx)("div",{className:"d-flex justify-content-center m-4",children:(0,n.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Увійти"})})]})})}var o=t(4091);t(2906),t(4680);var u=t(2619),x=t.n(u);function h(){let[e,s]=(0,l.useState)(0),[t,r]=(0,l.useState)(!0);function c(){r(!0),(0,a.r1)().then(e=>{s(e.data.uah||0),r(!1)}).catch(e=>{r(!1)})}return(0,l.useEffect)(()=>{c()},[]),(0,n.jsx)("div",{children:t?(0,n.jsx)(o.A,{header:!1}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"row",children:[(0,n.jsx)("div",{className:"col-9",children:(0,n.jsxs)("h2",{children:["Баланс ",e," UAH"]})}),(0,n.jsxs)("div",{className:"col-3 pt-2 text-end",children:[(0,n.jsx)("span",{onClick:c,"data-refresh":"balance",className:"refresh-icon",children:(0,n.jsx)("svg",{id:"Layer_1",version:"1.1",viewBox:"0 0 32 32",width:"20px",height:"20px",xmlSpace:"preserve",children:(0,n.jsx)("path",{fill:"currentColor",d:"M28,16c-1.219,0-1.797,0.859-2,1.766C25.269,21.03,22.167,26,16,26c-5.523,0-10-4.478-10-10S10.477,6,16,6  c2.24,0,4.295,0.753,5.96,2H20c-1.104,0-2,0.896-2,2s0.896,2,2,2h6c1.104,0,2-0.896,2-2V4c0-1.104-0.896-2-2-2s-2,0.896-2,2v0.518  C21.733,2.932,18.977,2,16,2C8.268,2,2,8.268,2,16s6.268,14,14,14c9.979,0,14-9.5,14-11.875C30,16.672,28.938,16,28,16z"})})}),(0,n.jsx)(x(),{href:"/balance",className:"next-btn-inline",children:(0,n.jsx)("svg",{className:"feather feather-chevron-right",fill:"none",height:"24",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("polyline",{points:"9 18 15 12 9 6"})})})]})]})})})}var m=t(9582);function j(){let[e,s]=(0,l.useState)({income:[],expense:[]}),t=(0,m._B)(),[c,i]=(0,l.useState)(!0),d=0,u=0,x=async(e,t)=>{try{let n=await (0,a.h5)(e,t);if(n.error)s({income:[],expense:[]});else{let e={income:[],expense:[]};(n.data||[]).forEach(s=>{"expense"===s.type?e.expense.push(s):"income"===s.type&&e.income.push(s)}),s(e)}i(!1)}catch(e){i(!1)}};function h(){i(!0),x(t.from,t.to)}return(0,l.useEffect)(()=>{h()},[]),(0,n.jsx)("div",{children:c?(0,n.jsx)(o.A,{header:!1}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"row",children:[(0,n.jsx)("div",{className:"col-6",children:(0,n.jsx)("h3",{children:(0,m.At)(new Date,"full")})}),(0,n.jsx)("div",{className:"col-6 text-end",children:(0,n.jsx)("span",{onClick:h,"data-refresh":"statistic",className:"refresh-icon",children:(0,n.jsx)("svg",{id:"Layer_1",version:"1.1",viewBox:"0 0 32 32",width:"20px",height:"20px",xmlSpace:"preserve",children:(0,n.jsx)("path",{fill:"currentColor",d:"M28,16c-1.219,0-1.797,0.859-2,1.766C25.269,21.03,22.167,26,16,26c-5.523,0-10-4.478-10-10S10.477,6,16,6  c2.24,0,4.295,0.753,5.96,2H20c-1.104,0-2,0.896-2,2s0.896,2,2,2h6c1.104,0,2-0.896,2-2V4c0-1.104-0.896-2-2-2s-2,0.896-2,2v0.518  C21.733,2.932,18.977,2,16,2C8.268,2,2,8.268,2,16s6.268,14,14,14c9.979,0,14-9.5,14-11.875C30,16.672,28.938,16,28,16z"})})})})]}),(0,n.jsxs)("div",{children:["Дохід: ",e.income.length>0?(0,n.jsxs)("ul",{children:[e.income.map(e=>(d+=e.sum,(0,n.jsxs)("li",{children:[e.sum," UAH"]},e.id)))," ",e.income.length>1?(0,n.jsxs)("li",{children:[(0,n.jsx)("b",{children:"Загалом:"})," ",d," UAH"]}):""]}):"відсутній"]}),(0,n.jsxs)("div",{children:["Витрати: ",e.expense.length>0?(0,n.jsxs)("ul",{children:[e.expense.map(e=>(u+=e.sum,(0,n.jsxs)("li",{children:[e.sum," UAH (",r.L1[e.category],")"]},e.id))),e.expense.length>0?(0,n.jsxs)("li",{children:[(0,n.jsx)("b",{children:"Загалом:"})," ",u," UAH"]}):""]}):"відсутні"]})]})})}var v=t(907);function f(e){let{setTextNotify:s,setShowNotify:t}=e,[r,c]=(0,l.useState)(""),[i,d]=(0,l.useState)(!1);return(0,n.jsx)("div",{children:i?(0,n.jsx)(o.A,{header:!1}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"row",children:[(0,n.jsx)("div",{className:"mb-2 col-sm-12 d-flex justify-content-center",children:(0,n.jsx)("input",{type:"number",className:"form-control i-default",value:r,placeholder:"сума доходу",onChange:e=>c(e.target.value),min:"0"})}),(0,n.jsx)("div",{className:"col-sm-12 text-center",children:(0,n.jsx)("button",{type:"button",className:"btn btn-success",onClick:function(){if(d(!0),Number(r)>0){let e=(0,v.hS)();null===e&&(t(!0),s("Необхідно обрати дату"),d(!1)),(0,a.Ou)(e,r,"income","","").then(e=>{t(!0),e?(c(""),s("Данні додано успішно")):s("Не вдалось додати дані"),d(!1),(0,v.JX)()})}else t(!0),s("Поле сумма не може бути порожнім"),d(!1)},children:"Додати дохід"})})]})})})}function N(e){let{setTextNotify:s,setShowNotify:t}=e,[c,i]=(0,l.useState)(!1),[d,u]=(0,l.useState)(""),[x,h]=(0,l.useState)(""),[j,f]=(0,l.useState)("");return(0,n.jsx)("div",{children:c?(0,n.jsx)(o.A,{header:!1}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"d-flex justify-content-center mt-3",children:(0,n.jsx)("input",{type:"number",className:"i-default form-control",min:"0",placeholder:"сума витрати",value:x,onChange:e=>h(e.target.value)})}),(0,n.jsx)("div",{className:"d-flex justify-content-center mt-3",children:(0,n.jsxs)("select",{className:"form-control s-default",value:d,onChange:e=>u(e.target.value),children:[(0,n.jsx)("option",{value:"",children:"Обрати"},""),Object.entries(r.L1).map(e=>{let[s,t]=e;return(0,n.jsx)("option",{value:s,children:t},s)})]})}),(0,n.jsx)("div",{className:"d-flex justify-content-center mt-3",children:(0,n.jsx)("textarea",{className:"form-control t-default",onChange:e=>f(e.target.value),value:j})}),(0,n.jsx)("div",{className:"d-flex justify-content-center mt-3",children:(0,n.jsx)("button",{type:"button",className:"btn btn-success",onClick:function(){if(i(!0),Number(x)>0&&d.length>0){let e=(0,m._B)();(0,a.Ou)(e.from,x,"expense",d,j).then(e=>{t(!0),e?(h(""),f(""),s("Данні додано успішно")):s("Не вдалось додати дані"),i(!1),(0,v.JX)()})}else t(!0),s("Поле категорія та сумма не можуть бути порожніми"),i(!1)},children:"Додати витрату"})})]})})}var p=t(7866);function y(){let[e,s]=(0,l.useState)((0,m._B)()),t=new Date().toISOString().split("T")[0];return(0,n.jsx)("input",{type:"date",className:"form-control i-default","data-date":"mainPage",value:e.from,max:t,onChange:t=>s({...e,from:t.target.value})})}function b(){let[e,s]=(0,l.useState)(0),[t,a]=(0,l.useState)(!1),[r,c]=(0,l.useState)(""),i=(0,l.useRef)(null),d=(0,l.useRef)(0),o=(0,l.useRef)(0),u=(0,l.useRef)(!1);return(0,n.jsxs)("div",{className:"row",children:[(0,n.jsx)(p.A,{show:t,text:r,setShowDefault:a}),(0,n.jsxs)("div",{className:"col-12",children:[(0,n.jsx)("div",{className:"slider-container",children:(0,n.jsxs)("div",{className:"slider-track d-flex",ref:i,style:{transform:"translateX(-".concat(50*e,"%)")},onTouchStart:e=>{d.current=e.touches[0].clientX,o.current=d.current,u.current=!0,i.current&&(i.current.style.transition="none")},onTouchMove:s=>{if(!u.current)return;o.current=s.touches[0].clientX;let t=-(50*e)+(o.current-d.current)/window.innerWidth*100;i.current&&(i.current.style.transform="translateX(".concat(t,"%)"))},onTouchEnd:()=>{if(!u.current)return;u.current=!1,i.current&&(i.current.style.transition="transform 0.3s ease-in-out");let t=o.current-d.current,n=e;Math.abs(t)>50&&(t>0&&e>0?n=e-1:t<0&&e<1&&(n=e+1)),s(n),i.current&&(i.current.style.transform="translateX(-".concat(50*n,"%)"))},children:[(0,n.jsxs)("div",{className:"slide p-3",children:[(0,n.jsx)("div",{className:"d-block-desk",style:{width:"100%"},children:(0,n.jsx)(h,{})}),(0,n.jsx)("div",{className:"d-block-desk mt-3",style:{width:"100%"},children:(0,n.jsx)(j,{})})]}),(0,n.jsxs)("div",{className:"slide p-3",children:[(0,n.jsx)("div",{className:"d-block-desk d-flex justify-content-center",children:(0,n.jsx)(y,{})}),(0,n.jsx)("div",{className:"d-block-desk mt-3",style:{width:"100%"},children:(0,n.jsx)(f,{setTextNotify:c,setShowNotify:a})}),(0,n.jsx)("div",{className:"d-block-desk mt-3",style:{width:"100%"},children:(0,n.jsx)(N,{setTextNotify:c,setShowNotify:a})})]})]})}),(0,n.jsx)("div",{className:"dots",children:[0,1].map(t=>(0,n.jsx)("span",{className:"dot ".concat(e===t?"active":""),onClick:()=>s(t)},t))})]})]})}t(1620);var g=t(5773);function S(e){let{data:s,dateStart:t,dateEnd:a}=e,r=(0,v.zl)(s.expense),c=(0,v.w8)(s.expense),i=(0,v.ac)(t,a),d=(0,v.nS)(r);(0,v.E6)(c,d);let[o,u]=(0,l.useState)(!1),[x,h]=(0,l.useState)(null),[m,j]=(0,l.useState)({}),f=(0,l.useRef)(null),N=new Date,p=N.toISOString().split("T")[0],y=N.getDate(),b=p;if(y>10){let e=new Date(N);e.setDate(e.getDate()-8),b=e.toISOString().split("T")[0];let s=i.findIndex(e=>e===b);(0,l.useEffect)(()=>{if(f.current&&-1!==s){let e=f.current,t=e.children[s];t&&(e.scrollLeft=t.offsetLeft)}},[s])}let S=e=>{let t=(0,v.cI)(s.expense,e);h(e),j(t||[]),u(!0)};return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"d-flex mt-5",children:[(0,n.jsx)(k,{}),(0,n.jsx)("div",{ref:f,className:"d-flex scrollable-table",children:i.map(e=>(0,n.jsx)(w,{date:e,items:r[e]||{},income:s.income,openDetail:S},e))})]}),(0,n.jsx)(g.A,{isOpen:o,onClose:()=>u(!1),selectedDate:x,selectedItems:m})]})}function w(e){let{date:s,items:t,income:l,openDetail:a}=e,c=0,i=(0,v.Qz)(l,s),d=new Date(s);return(0,n.jsxs)("div",{className:"colum-expense",children:[(0,n.jsxs)("div",{className:"colum-date",onClick:()=>a(s),children:[d.toLocaleDateString("uk-UA"),"(",(0,m.At)(d,"nameDay"),")"]}),(0,n.jsx)("div",{className:"v-light v-border text-center",children:i>0?(0,n.jsx)("span",{className:"value",children:i}):(0,n.jsx)("span",{className:"zero-value"})}),(0,n.jsx)("div",{className:"v-border",children:(0,n.jsx)("span",{className:"zero-value"})}),Object.entries(r.L1).map(e=>{let[l]=e,r=t[l]?Number(t[l]):0;return r>0&&(c+=r),(0,n.jsx)("div",{className:"v-light v-border text-center",children:r?(0,n.jsx)("span",{className:"value",onClick:()=>a(s),children:r}):(0,n.jsx)("span",{className:"zero-value"})},l)}),(0,n.jsx)("div",{className:"text-center",children:c?(0,n.jsx)("span",{className:"value",children:(0,n.jsx)("b",{children:c})}):(0,n.jsx)("span",{className:"zero-value"})})]})}function k(){return(0,n.jsxs)("div",{className:"category-column",children:[(0,n.jsx)("div",{className:"v-light v-border",children:"Дата"}),(0,n.jsx)("div",{className:"v-light v-border",children:"Дохід"}),(0,n.jsx)("div",{className:"v-light v-border",children:"Витрати"}),Object.entries(r.L1).map(e=>{let[s,t]=e;return(0,n.jsx)("div",{className:"v-light v-border",children:t},s)}),(0,n.jsx)("div",{className:"",children:"Всього"})]})}function C(){let[e,s]=(0,l.useState)({income:[],expense:[]}),[t,r]=(0,l.useState)(!0),[c,i]=(0,l.useState)(null),[d,u]=(0,l.useState)((0,m.Ew)()),x=async(e,t)=>{try{r(!0),i(null);let n=await (0,a.h5)(e,t);if(n.error)i(n.error),s({income:[],expense:[]});else{let e={income:[],expense:[]};(n.data||[]).forEach(s=>{"expense"===s.type?e.expense.push(s):"income"===s.type&&e.income.push(s)}),s(e)}r(!1)}catch(e){i("Помилка завантаження даних"),s({income:[],expense:[]}),r(!1),(0,a.e4)(),location.replace("/")}};return(0,l.useEffect)(()=>{x(d.from,d.to)},[]),(0,n.jsxs)("div",{className:"container",children:[(0,n.jsxs)("div",{className:"row m-3",children:[(0,n.jsx)("div",{className:"col-md-4 col-sm-12 mt-2 text-center",children:(0,n.jsx)("input",{type:"date",className:"form-control",value:d.from,"data-date-from":"",onChange:e=>u({...d,from:e.target.value})})}),(0,n.jsx)("div",{className:"col-md-4 col-sm-12 mt-2 text-center",children:(0,n.jsx)("input",{type:"date",className:"form-control","data-date-to":"",value:d.to,onChange:e=>u({...d,to:e.target.value})})}),(0,n.jsx)("div",{className:"col-md-4 col-sm-12 mt-2 text-center",children:(0,n.jsx)("button",{type:"button",className:"btn btn-success",onClick:()=>{let e=document.querySelector("input[data-date-from]").value,s=document.querySelector("input[data-date-to]").value;e&&s&&(u({from:e,to:s}),x(e,s))},children:"Відобразити"})})]}),(0,n.jsx)("div",{children:c?(0,n.jsx)("div",{className:"alert alert-danger",role:"alert",children:c}):t?(0,n.jsx)(o.A,{header:!1}):(0,n.jsx)("div",{children:(0,n.jsx)(S,{data:e,dateStart:d.from,dateEnd:d.to})})})]})}function A(){let[e,s]=(0,l.useState)(!1),[t,a]=(0,l.useState)("");return(0,n.jsxs)("div",{className:"container-fluid",children:[(0,n.jsxs)("div",{className:"row mb-4",children:[(0,n.jsx)(p.A,{show:e,text:t,setShowDefault:s}),(0,n.jsx)("div",{className:"col-6",children:(0,n.jsxs)("div",{className:"d-block-desk-no-hover",children:[(0,n.jsx)(h,{}),(0,n.jsx)(j,{})]})}),(0,n.jsx)("div",{className:"col-6",children:(0,n.jsxs)("div",{className:"d-block-desk-no-hover",children:[(0,n.jsx)("div",{className:"d-flex justify-content-center",children:(0,n.jsx)(y,{})}),(0,n.jsx)("div",{className:"d-flex justify-content-center",children:(0,n.jsx)("span",{children:"Дохід"})}),(0,n.jsx)(f,{setTextNotify:a,setShowNotify:s}),(0,n.jsx)("div",{className:"d-flex justify-content-center",children:(0,n.jsx)("span",{children:"Витрати"})}),(0,n.jsx)(N,{setTextNotify:a,setShowNotify:s})]})})]}),(0,n.jsx)("div",{className:"row m-1",children:(0,n.jsx)("div",{className:"d-block-desk-no-hover",children:(0,n.jsx)(C,{})})})]})}function D(){return(0,n.jsx)("div",{children:i.Fr?(0,n.jsx)(b,{}):(0,n.jsx)(A,{})})}function E(){let[e,s]=(0,l.useState)(!1),[t,r]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{!async function(){try{await (0,a.T5)()?s(!0):((0,a.e4)(),s(!1)),r(!1)}catch(e){(0,a.e4)(),s(!1),r(!1)}}()},[]),t)?(0,n.jsx)(o.A,{}):(0,n.jsxs)("div",{className:"container",children:[(0,n.jsx)("div",{className:"m-5 text-center",children:(0,n.jsx)("p",{className:"h1",children:"LiVi Analytics"})}),e?(0,n.jsx)(D,{}):(0,n.jsx)(d,{})]})}},2906:()=>{},2979:(e,s,t)=>{Promise.resolve().then(t.bind(t,1136))},4680:()=>{},7866:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});var n=t(5155),l=t(2115);function a(e){let{show:s,text:t,setShowDefault:a}=e;return((0,l.useEffect)(()=>{if(s){let e=setTimeout(()=>{a(!1)},2e3);return()=>clearTimeout(e)}},[s]),s||0!==t.length)?(0,n.jsx)("div",{className:"c-modal ".concat(s?"fade-in":"fade-out"),id:"exampleModal",tabIndex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:(0,n.jsx)("div",{className:"modal-dialog text-center",children:(0,n.jsx)("div",{className:"alert alert-primary pt-3",role:"alert",children:t})})}):null}}},e=>{e.O(0,[975,594,813,443,202,441,255,358],()=>e(e.s=2979)),_N_E=e.O()}]);